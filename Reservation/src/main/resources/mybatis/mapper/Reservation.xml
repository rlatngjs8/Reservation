<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.himedia.springboot.ReservationDAO">
<select id="getList2" resultType="com.himedia.springboot.ReservationDTO">
	select a.seqno, b.userid, b.name, b.mobile, c.space_name, a.useday, a.startTime, a.endTime, a.totalPrice, a.purchaseTime
		from re_info a inner join members b on a.userid = b.userid inner join spaces c on a.space_name = c.space_name limit #{param1}, #{param2}
</select>
<select id="getTotal2" resultType="int">
	select count(*) from re_info
</select>
<delete id="reDelete" parameterType="int">
	delete from re_info where seqno = #{seqno}
</delete>
<select id="selectList" resultType="com.himedia.springboot.ReservationDTO">
	select * from re_info where userid=#{userid} order by purchaseTime desc
</select>
<select id="payCom" resultType="com.himedia.springboot.ReservationDTO">
	select a.seqno, b.userid, b.name, b.mobile, c.space_name, a.useday, a.startTime, a.endTime, a.totalPrice, a.purchaseTime
		from re_info a inner join members b on a.userid = b.userid inner join spaces c on a.space_name = c.space_name where seqno=#{seqno}
</select>
<select id="sales" resultType="com.himedia.springboot.ReservationDTO">
    SELECT seqno, purchaseTime, totalPrice FROM re_info WHERE purchaseTime BETWEEN #{param1} AND #{param2} ORDER BY purchaseTime DESC
</select>
<insert id="insert_temp_reservation">
	insert into temp_reservation set start_time=#{param1}, end_time=#{param2}, reservation_date=#{param3}, total_price=#{param4}, space_id=#{param5}, userid =#{param6}
</insert>

<select id="select_temp_reservation">
	SELECT tr.*, s.space_name, s.space_type, s.price , s.img1
	FROM temp_reservation AS tr
	INNER JOIN spaces AS s ON tr.space_id = s.space_id
	WHERE userid=#{param1};
</select>

<delete id="delete_temp_reservation" parameterType="java.util.HashMap">
	DELETE FROM temp_reservation
	WHERE reservation_id=#{param1}	
</delete>
</mapper>